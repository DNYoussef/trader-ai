# Security Credential Rotation Checklist

**Generated:** 2025-11-26
**Priority:** CRITICAL
**Status:** PENDING HUMAN ACTION

---

## URGENT: Exposed Credentials Found

The following credentials were previously exposed and MUST be rotated immediately:

### 1. HuggingFace Token
- **Exposed Value:** `[REDACTED - check .env file]`
- **Action Required:**
  1. Go to https://huggingface.co/settings/tokens
  2. Revoke the exposed token
  3. Generate a new token
  4. Update `.env` with new value: `HF_TOKEN=hf_NEW_TOKEN_HERE`

### 2. Database Encryption Key
- **Exposed Value:** `[REDACTED]`
- **Action Required:**
  1. Generate new key:
     ```bash
     python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
     ```
  2. Update `.env` with new value
  3. Re-encrypt any existing encrypted data with new key
  4. NOTE: Old data encrypted with old key will be unreadable

### 3. JWT Secret Key
- **Exposed Value:** `[REDACTED]`
- **Action Required:**
  1. Generate new key:
     ```bash
     python -c "import secrets; print(secrets.token_urlsafe(32))"
     ```
  2. Update `.env` with new value
  3. Invalidate all existing JWT tokens (users will need to re-authenticate)

### 4. Plaid Credentials
- **Exposed Client ID:** `[REDACTED]`
- **Exposed Secret:** `[REDACTED]`
- **Action Required:**
  1. Go to https://dashboard.plaid.com/developers/keys
  2. Rotate/regenerate API keys
  3. Update `.env` with new values:
     - `PLAID_CLIENT_ID=new_client_id`
     - `PLAID_SECRET=new_secret`

---

## Verification Steps

After rotating all credentials:

- [ ] All old tokens revoked at provider dashboards
- [ ] New values added to `.env` (NOT committed to git)
- [ ] `.env` file permissions restricted (chmod 600 on Linux/Mac)
- [ ] Application starts successfully with new credentials
- [ ] No authentication errors in logs
- [ ] Banking integration (if used) works with new Plaid keys

---

## Git History Scrubbing (RECOMMENDED)

If credentials were ever committed to git history, consider scrubbing:

### Option 1: BFG Repo-Cleaner (Recommended)
```bash
# Download BFG from https://rtyley.github.io/bfg-repo-cleaner/
java -jar bfg.jar --delete-files .env repo.git
cd repo.git
git reflog expire --expire=now --all && git gc --prune=now --aggressive
```

### Option 2: git filter-branch
```bash
git filter-branch --force --index-filter \
  'git rm --cached --ignore-unmatch .env' \
  --prune-empty --tag-name-filter cat -- --all

git reflog expire --expire=now --all
git gc --prune=now --aggressive
```

**Note:** After scrubbing, force push is required. Coordinate with team.

---

## Post-Rotation Security Audit

- [ ] Review git log to confirm no secrets remain
- [ ] Run secret scanning: `trufflehog git file://./`
- [ ] Enable GitHub secret scanning (if hosted on GitHub)
- [ ] Consider using a secrets manager (HashiCorp Vault, AWS Secrets Manager)

---

## Contact

If you discover additional exposed secrets, immediately:
1. Rotate the credential
2. Document in this file
3. Notify the team

---

*This checklist was auto-generated by the Trader-AI remediation process.*
